<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--    <link rel="shortcut icon" sizes="57x57" href="http://www.qiyipic.com/20130423143600/fix/H5-57x57.png">-->
    <!--    <link rel="shortcut icon" sizes="57x57" href="./hao.png">-->
    <!--    <link rel="apple-touch-icon-precomposed" href="./hao.png">-->
    <!--    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://www.qiyipic.com/20130423143600/fix/H5-114x114.png">-->
    <!--    <link rel="apple-touch-icon" href="http://www.qiyipic.com/20130423143600/fix/H5-0x0.png">-->
    <title>runoob.com</title>
    <!--    <style>-->
    <!--        div {-->
    <!--            width: 100%;-->
    <!--            height: 100%;-->
    <!--            cursor:pointer;-->
    <!--            transform:translateX(+0%);-->
    <!--        }-->
    <!--        div:hover {-->
    <!--            left:calc(50% - 220px);-->
    <!--            right:calc(50% - 220px);-->
    <!--            top:calc(50% - 2px);-->
    <!--            margin-top:-30px-->
    <!--        }-->
    <!--    </style>-->

    <style type="text/css">
	.input_tips{
		 position: absolute;
		 top: 10px;
		 left: 16px;
		 font-size: 13px;
		 line-height: 18px;
		 color: #CCC;
		 cursor: text;
	}
	.inputOuter{
	    width: 250px;
	    height: 38px;
	}
	.inputstyle{
	    width: 232px;
	    position: relative;
	    height: 16px;
	    line-height: 16px;
	}
	.uinArea{
		 height: 48px;
		 position: relative;
		 z-index: 10;
	}
	.mySpan{
		cursor: url("ic_public_add.svg") 12 12, auto;
	}

	@media (hover: hover) {
        #zhangwen .related-recommend-link:hover {
            cursor:pointer;
            color:red;
            -webkit-text-decoration-line: underline;
            text-decoration-line: underline
        }
    }
    #zhangwen .related-recommend-link {
        color:#0a59f7;
    }

    .related-recommend:hover {
        cursor:pointer;
        color:red;
        -webkit-text-decoration-line: underline;
        text-decoration-line: underline
    }
<!--    @font-face {-->
<!--        font-family:'MaoKenWangXingYuan';-->
<!--        src:url('./font/MaoKenWangXingYuan-2.ttf')-->
<!--    }-->
</style>
</head>
<!--<body style="background-color: rgba(255, 255, 255, 1.0)">-->
<body>
<!--<embed src="document.pdf" type="application/pdf" width="100%" height="600px" />-->
<div>
    <!--    <div style="font-family:MaoKenWangXingYuan">猫肯qqq</div>-->
    <p ><a href="#" title="xxxxxx">https://tips-p01-drcn.hwcloudtest.cn:8091/files/httpserver/MODEL/EMUI/C00B030SDV/resource/card/202304042vfvTZ/zh-cn/content/12_system/systemUI/SF-10044757_f001_tc.html?emui=HarmonyOSOH&productRegion=tips_ABC_domestic&lang=zh-cn&docVersion=C00B030SDV</a></p>
    <div id="zhangwen">
        <p ><a href="#" title="xxxxxx">https://tips-p01-drcn.hwcloudtest.cn:8091/files/httpserver/MODEL/EMUI/C00B030SDV/resource/card/202304042vfvTZ/zh-cn/content/12_system/systemUI/SF-10044757_f001_tc.html?emui=HarmonyOSOH&productRegion=tips_ABC_domestic&lang=zh-cn&docVersion=C00B030SDV</a></p>
        <p ><a href="javascript:void(0)" target="_parent">单击此处什么也不会发生_parent</a></p>
        <p ><a href="javascript:void(0)" target="_blank">单击此处什么也不会发生_blank</a></p>
        <p ><a href="https://m.iqiyi.com/" target="_blank">aiqiyi</a></p>
        <p ><span id="span" class="related-recommend-link" data-url="https://www.baidu.com">HarmonyOS 桌面的更多玩法</span></p>
        <p ><span id="span1" class="related-recommend" data-url="https://tips-p01-drcn.dbankcdn.cn/MODEL/EMUI/C00B031/resource/card/202304110ZRifo/zh-cn/content/12_system/systemUI/SF-10044757_f001_tc.html">HarmonyOS 桌面的更多玩法</span></p>
        <img src="resource://fake.com/aaa.gif" alt="image &#45;&#45; end" width="100" height="100">-->
        <video width="320" height="240" controls>
            <source src="./movie.webm"  type="video/webm">
        </video>
        <!--<div style=" overflow:scroll; width:800px; height:800px;">-->
        <p><a href="./1_copy.html">1_copy.html</a></p>
        <p><a href="./1_copy.html" target="_blank">1_copy.html_新窗口</a></p>
        <!--        <p id="copy1"><a href="image/2_copy.html" target="_parent">image_2_copy.html_原窗口</a></p>-->
        <p><a href="http://httpbin.org/basic-auth/2222/2222">百度</a></p>
        <p><a href="https://www.baidu.com" target="_blank">百度_新窗口</a></p>
        <!--        <p ><a id="1.html" href="./1.html" target="_blank">1.html_新窗口</a></p>-->
        <!--        <p id="baidu2"><a href="https://downpack.baidu.com/baidusearch_AndroidPhone_1026903k.apk" target="_parent">baidu_apk</a></p>-->
        <!--        <p id="baidu1"><a href="https://www.runoob.com/try/try.php?filename=tryjs_openwindow" target="_parent">菜鸟</a></p>-->
        <!--        <p id="gitee"><a href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis/js-apis-webview.md#getorigins" target="_parent">gitee</a></p>-->
        <!--        <p id="wpt"><a href="http://wpt.live/tools/runner/index.html" target="_parent">wpt</a></p>-->
        <video id="v" width="640" height="480" autoplay></video>
        <button onclick="openCamera()">打开摄像头</button>
        <button id="dakai" onclick="dakai()">打开</button>
        <button id="guanbi" onclick="guanbi()">关闭</button>
        <button id="dakai1" onclick="dakai1()">打开111</button><br/>
        <button onclick="getLocation()">点我</button>
        <button onclick="getMIDIPermissions()">点我MIDI</button>
        <button id="hide">隐藏</button>
        <button id="show">显示</button>
        <button onclick="windowPrint()">print</button>

        <!--        <input type="button" value="SendToEts" onclick="PostMsgToEts(msgFromJS.value)"/><br/>-->
        <input type="button" value="SendToEts" onclick="PostMsgToEts(msgFromJS.value);"/><br/>
        <input id="msgFromJS" type="text" value="h5发送测试数据"/><br/>
        <p id="demo">点击按钮获取</p>
        <p class="output">display received message send from ets</p>

        <!--        <h1 style="cursor:pointer">我的第一个标题</h1>-->
        <!--        <p>我的第一个段落。</p>-->
        <!--        <a href="www.baidu.com">百度</a>-->

        <!--        <p>请把鼠标移动到单词上，可以看到鼠标指针发生变化：</p>-->
        <!--        <span class="mySpan">mySpan</span><br>-->
                <span style="cursor:url('ic_public_add.svg') 12 12, default">custom_default</span><br>
                <span style="cursor:none">none</span><br>
                <span style="cursor:auto">auto</span><br>
        <!--        <span style="cursor:crosshair">crosshair</span><br>-->
        <!--        <span style="cursor:default">default</span><br>-->
        <!--        <span style="cursor:help">help</span><br><br><br>-->
        <!--        <span style="cursor:move">move</span><br>-->
        <!--        <span style="cursor:n-resize">n-resize</span><br>-->
        <!--        <span style="cursor:s-resize">s-resize</span><br>-->
        <!--        <span style="cursor:e-resize">e-resize</span><br>-->
        <!--        <span style="cursor:w-resize">w-resize</span><br>-->
        <!--        <span style="cursor:nw-resize">nw-resize</span><br>-->
        <!--        <span style="cursor:se-resize">se-resize</span><br>-->
        <!--        <span style="cursor:nwse-resize">nwse-resize</span><br>-->
        <!--        <span style="cursor:ne-resize">ne-resize</span><br>-->
        <!--        <span style="cursor:sw-resize">sw-resize</span><br>-->
        <!--        <span style="cursor:nesw-resize">nesw-resize</span><br>-->
        <!--        <span style="cursor:col-resize">col-resize</span><br>-->
        <!--        <span style="cursor:row-resize">row-resize</span><br>-->
        <!--        <span style="cursor:pointer">pointer</span><br>-->
        <!--        <span style="cursor:text">text</span><br>-->
        <!--        <span style="cursor:copy">copy</span><br>-->
        <!--        <span style="cursor:grabbing">grabbing</span><br>-->
        <!--        <span style="cursor:zoom-in">zoom-in</span><br>-->
        <!--        <span style="cursor:zoom-out">zoom-out</span><br>-->
        <!--        <span style="cursor:no-drop">no-drop</span><br>-->
        <!--        <span style="cursor:not-allowed">not-allowed</span><br>-->
        <!--        <span style="cursor:progress">progress</span><br>-->
        <!--        <span style="cursor:wait">wait</span><br>-->
        <!--        <span style="cursor:alias">alias</span><br>-->
        <!--        <span style="cursor:cell">cell</span><br>-->
        <!--        <span style="cursor:grab">grab</span><br>-->
        <!--        <span style="cursor:vertical-text">vertical-text</span><br>-->
        <!--        <span style="cursor:context-menu">context-menu</span><br>-->
        <!--        <span style="cursor:all-scroll">all-scroll</span><br>-->

        <!--        <img id="img1" src="ic_public_add.svg">-->
        <!--        <img id="img2" src="http://www.qiyipic.com/20130423143600/fix/H5-57x57.png">-->
        <!--<img src="all.png" alt="image1 &#45;&#45; end" width="10" height="120">-->
        <!--        <img src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==" alt="Red dot" />-->
        <!--        <video id="video" autoplay></video><br>-->
        <video id="video" width="240" height="480" autoplay></video>
        <video id="video1" width="240" height="480" autoplay></video>
        <video id="video2" width="240" height="480" autoplay></video><br>
        <!--        <img src="aaa.gif" alt="image &#45;&#45; end" width="100" height="100">-->
<!--        <video controls autoplay>-->
<!--            <source src="vp8.webm" type="video/webm">-->
<!--        </video>-->
<!--        <video controls autoplay>-->
<!--            <source src="HarmonyOS.mp4" type="video/mp4">-->
<!--        </video>-->
        <button id="start" onclick="startCapture()">clipboard-read</button>
<!--        <button id="stop" onclick="stopCapture()">Stop Capture</button>-->
        <button id="start1">Start Capture</button>
        <button id="stop1">Stop Capture</button>
        <button id="start2">Start Capture</button>
        <button id="stop2">Stop Capture</button><br>
        <!--        <a rel="noopener" href="#" title="xxxxx11x">模式111</a><br>-->
        <!--        <a rel="noopener" href="#" οnclick="return false">模式111</a><br>-->
        <p id="demo1">点击按钮获取</p>
        <form action="http://httpbin.org/post" method="post"/>
        <!--        <form action="1_copy.html" method="post"/>-->
        <input type="text" name="user_name" />
        <input type="submit" />
        </form>
    </div>
</div>
<!--</div>-->
<script src="jquery.min.js">
</script>

<script type="text/javascript">
str = objName.test("test function")
console.log('objName.test result:'+ str)
</script>

<script type="text/javascript">
var log_demo=document.getElementById("demo");
function windowPrint() {
    window.print();
}

//fetch('./data.json')
//  .then(response => response.json())
//  .then(function(data) {
//    log_demo.innerHTML = JSON.stringify(data);
//    console.log(JSON.stringify(data));
//  });

//var xhr = new XMLHttpRequest();
//xhr.withCredentials = false;
//xhr.open('GET', '1_copy.html', true);
//xhr.onload = function() {
//    if (xhr.status === 200) {
//        var html = xhr.responseText;
//        document.getElementById('demo').innerHTML = html;
//    }
//};
//xhr.send();

function handleVideoSuccess(stream) {
    console.log('XJ ts Got stream with mediaConfig:', mediaConfig);
    log_demo.innerHTML = 'XJ ts stream is : ' + stream;
    var video = document.getElementById('v');
    video.srcObject = stream;
    video.play();
}
function handleVideoError(err) {
    console.log('XJ ts handleVideoError');
    log_demo.innerHTML = 'XJ ts handleVideoError: ' + err;
}
const mediaConfig = {
    audio: false,
    video: true
    //video: { facingMode: ("user") }
};
function openCamera() {
    navigator.mediaDevices.getUserMedia(mediaConfig).then(handleVideoSuccess).catch(handleVideoError);
}

const spanElem = document.getElementById("span");
spanElem.addEventListener("click", function(evt) {
  var url = spanElem.getAttribute("data-url");
  openedWindow = window.open(url);
}, false);

const span1Elem = document.getElementById("span1");
span1Elem.addEventListener("click", function(evt) {
  var url = span1Elem.getAttribute("data-url");
  //window.location.href = url;
  openedWindow = window.open(url);
}, false);

spanElem.addEventListener("mouseenter", function () {
     console.log("spanElem的mouseenter事件被触发");
     log_demo.innerHTML = 'mouseenter';
},false);

spanElem.addEventListener("mouseover", function () {
     console.log("spanElem的mouseover事件被触发");
     log_demo.innerHTML = 'mouseover';
},false);

spanElem.addEventListener("mouseout", function () {
    console.log("spanElem的mouseout事件被触发");
    log_demo.innerHTML = 'mouseout';
},false);

spanElem.addEventListener("mouseleave", function () {
    console.log("spanElem的mouseleave事件被触发");
    log_demo.innerHTML = 'mouseleave';
},false);

const videoElem = document.getElementById("video");
const startElem = document.getElementById("start");
const stopElem = document.getElementById("stop");
const videoElem1 = document.getElementById("video1");
const startElem1 = document.getElementById("start1");
const stopElem1 = document.getElementById("stop1");
const videoElem2 = document.getElementById("video2");
const startElem2 = document.getElementById("start2");
const stopElem2 = document.getElementById("stop2");

// Options for getDisplayMedia()
//var displayMediaOptions = {
//  video: {
//    cursor: "never"
//  },
//  audio: false
//};

var displayMediaOptions0 = {
  video: true,
  audio: false
};

var displayMediaOptions = {
  video: {
    width: 480,
    height: 960,
  },
  audio: false
};

async function startCapture() {
    navigator.permissions.query({ name: 'clipboard-read' }).then(permissionStatus => {
      if (permissionStatus.state === 'granted' || permissionStatus.state === 'prompt') {
        // 使用navigator.clipboard读取剪切板内容
        navigator.clipboard.readText().then(clipboardText => {
          console.log('剪切板内容为：', clipboardText);
        }).catch(error => {
          console.error('读取剪切板内容失败：', error);
        });
      } else {
        console.error('没有剪切板读取权限');
      }
    }).catch(error => {
      console.error('获取剪切板读取权限失败：', error);
    });
  try {
    //videoElem.srcObject = await navigator.mediaDevices.getDisplayMedia(displayMediaOptions0);
    //dumpOptionsInfo();
  } catch(err) {
    console.error("xiongjun startCapture Error: " + err);
    log_demo.innerHTML = 'startCapture error: ' + err;
    // startCapture error: NotAllowedError: Permission denied
  }
}

function stopCapture() {
  let tracks = videoElem.srcObject.getTracks();

  tracks.forEach(track => track.stop());
  videoElem.srcObject = null;
}

async function startCapture1() {
  try {
    videoElem1.srcObject = await navigator.mediaDevices.getDisplayMedia(displayMediaOptions);
    //dumpOptionsInfo();
  } catch(err) {
    console.error("xiongjun startCapture1 Error: " + err);
  }
}

function stopCapture1() {
  let tracks = videoElem1.srcObject.getTracks();

  tracks.forEach(track => track.stop());
  videoElem1.srcObject = null;
}

async function startCapture2() {
  try {
    videoElem2.srcObject = await navigator.mediaDevices.getDisplayMedia(displayMediaOptions);
    //dumpOptionsInfo();
  } catch(err) {
    console.error("xiongjun startCapture2 Error: " + err);
  }
}

function stopCapture2() {
  let tracks = videoElem2.srcObject.getTracks();

  tracks.forEach(track => track.stop());
  videoElem2.srcObject = null;
}

// Set event listeners for the start and stop buttons
// startElem.addEventListener("click", function(evt) {
//   startCapture();
// }, false);
// stopElem.addEventListener("click", function(evt) {
//   stopCapture();
// }, false);

startElem1.addEventListener("click", function(evt) {
  startCapture1();
}, false);
stopElem1.addEventListener("click", function(evt) {
  stopCapture1();
}, false);

startElem2.addEventListener("click", function(evt) {
  startCapture2();
}, false);
stopElem2.addEventListener("click", function(evt) {
  stopCapture2();
}, false);
//startCapture1();
var h5Port;
var output = document.querySelector('.output');
var count = 0;
window.addEventListener('message', function (event) {
    if (event.data == 'test-map') {
        if (event.ports[0] != null) {
            // 1. 保存从ets侧发送过来的端口
            h5Port = event.ports[0];
            // 2. 注册接收消息回调.
            h5Port.onmessage = function (event) {
              // 接收ets侧发送过来的消息.
              var msg = 'Got message from ets:';
              var result = event.data;
              if (typeof(result) == "string") {
                console.log("received string message from html5, string is:" + result);
                msg = msg + result;
              } else if (typeof(result) == "object") {
                if (result instanceof ArrayBuffer) {
                  console.log("received arraybuffer from html5, length is:" + result.byteLength);
                  msg = msg + "lenght is " + result.byteLength;
                } else {
                  console.log("not support");
                  msg = msg + "not support";
                }
              } else {
                console.log("not support");
                msg = msg + "not support";
              }
              output.innerHTML = msg;
            }
            // 3. 向发送ets侧发送过来的消息.
            if (h5Port) {
              h5Port.postMessage("h5测试数据 " + count);
              count++;
            }
        }
    }
})

// 3. 使用h5Port往ets侧发送消息.
function PostMsgToEts(data) {
    if (h5Port) {
      h5Port.postMessage(data + " " + count);
      count++;
    } else {
      console.error("h5Port is null, Please initialize first");
      log_demo.innerHTML = "h5Port is null, Please initialize first";
    }
}

</script>

<script>
$(document).ready(function(){
  $("#hide").click(function(){
    $("p").hide();
    $("img").hide();
  });
  $("#show").click(function(){
    $("p").show();
    $("img").show();
  });
});
</script>
<script type="text/javascript">
    var log=document.getElementById("demo");
    let openedWindow;
    function dakai1()
    {
        navigator.clipboard.writeText("111111111");
        //openedWindow = window.open('https://m.iqiyi.com/', "11111");
    }
    function dakai()
    {
        log.innerHTML = "openedWindow start";
        //openedWindow = window.open('about:blank', "", "location=no,status=no,scrollvars=no");
        //openedWindow = window.open("./1.html", "_blank", 'width=800,height=600');
        //openedWindow = window.open("./1.html");
        //openedWindow = window.open("./1_copy.html", "_blank", 800, 600);
        if (openedWindow && !openedWindow.closed) {
            //openedWindow.location.href = "https://www.baidu.com";
            log.innerHTML = "openedWindow start focus";
            openedWindow.focus();
            return;
        }
        //openedWindow = window.open('https://www.baidu.com', "_blank", 800, 600);
        openedWindow = window.open('https://www.baidu.com', "11111");
        //openedWindow = window.open('./1_copy.html', "_parent", "location=no,status=no,scrollvars=no");
        //openedWindow = window.open('./1_copy.html', "", "location=no,status=no,scrollvars=no");
        //openedWindow = window.open('javascript:void(0)', "", "location=no,status=no,scrollvars=no");
        if (!openedWindow || openedWindow.closed) {
            log.innerHTML = "openedWindow.closed";
            //openedWindow = window.open('https://www.baidu.com');
            if (openedWindow) {
                log.innerHTML = "openedWindow close";
                if (openedWindow.document) {
                    log.innerHTML = "document not null";
                    //openedWindow.location.href = "https://www.baidu.com";
                    //openedWindow.document.write("<p>这是我的窗口</p>");
                    //openedWindow.focus();
                    //openedWindow.document.body.bgColor = "red";
                    //openedWindow.focus();
                    //openedWindow.alert("你好，我是一个警告框！");
                }
                setTimeout(function() {
                    log.innerHTML = "1111111111";
                    //openedWindow.location.href = "http://wpt.live/websockets/Close-1005.any.worker.html?wss";
                    //"https://www.baidu.com";
                    //openedWindow.close();
                    //openedWindow = null;
                    //openedWindow.document.write("<p>这是我的窗口111</p>");
                    //openedWindow.alert("你好，我是一个警告框！");
                    //openedWindow.document.write("<p>这是我的窗口1</p>");
                    //openedWindow.focus();
                }, 2000);
            } else {
                log.innerHTML = "openedWindow null";
                return;
            }
        } else {
            log.innerHTML = "openedWindow 11111111111";
        }
    }

    function guanbi()
    {
        if (openedWindow) {
            openedWindow.close();
        }
    }
    window.addEventListener('load', function() {
      dakai()
    });
    var x=document.getElementById("demo");
    var x1=document.getElementById("demo1");
    var sssscount = 0;
    function showPosition(position)
    {
        //x.innerHTML = 'showPosition';
        x.innerHTML = "纬度: " + position.coords.latitude + "<br>经度: " + position.coords.longitude;
    }
    function error(err) {
        sssscount++;
        x.innerHTML = 'ERROR(' + err.code + '): ' + err.message + ", " + sssscount;
    };

    function getLocation()
    {
        var options = {
          enableHighAccuracy: true,
          timeout: 5000,
        };
        if (navigator.geolocation)
        {
            x.innerHTML = '开启中';
            //navigator.geolocation.watchPosition(showPosition, error, options);
            //sleep(1);
            navigator.geolocation.getCurrentPosition(showPosition, error, options);//user denied geolocation
            //navigator.geolocation.getCurrentPosition(showPosition, error);

        }
        else
        {
            x.innerHTML="该浏览器不支持获取地理位置";
        }
    }

    function onMIDIMessage (message) {
        x.innerHTML = message.data;
    }
    function success(midiAccess) {
        x1.innerHTML = "success";
        //let { inputs:inputMap, outputs:outputMap, sysexEnabled } = midiAccess;
        var inputs = midiAccess.inputs.values();
        x1.innerHTML = midiAccess.inputs.size + " " + JSON.stringify(inputs.next());
    }
    function failure() {
        x1.innerHTML = "failure";
    }
    function getMIDIPermissions()
    {
      let promise = navigator.mediaDevices.getUserMedia({ audio: true, video: false });
      //then()异步，调用MediaStream对象作为参数
      promise.catch(error => {
        log.innerHTML = 'getUserMedia deny';
      }).then(function (MediaStream) {
        console.info("then MediaStream is " + MediaStream)
        log.innerHTML = "then MediaStream is " + MediaStream;
        if (MediaStream) {
            videoElem.srcObject = MediaStream;
            videoElem.play();
        }
      });
      //navigator.requestMIDIAccess({sysex: true, software: true}).then(success, failure).catch((error) => { x1.innerHTML="错误：" + error; });
    }

    function getNotificationPermissions()
    {
        // 请求通知权限
        Notification.requestPermission().then((perm)=>{
            // "default", "denied", "granted"
            if (perm === "denied") {
                x1.innerHTML="000000";
                return;
            }
        });
    }

    setTimeout(function() {
        var e = document.createEvent("MouseEvents");
        e.initEvent("click", true, true);
        //document.getElementById("dakai").dispatchEvent(e);
        //document.getElementById("baidu").dispatchEvent(e);
    }, 3000);

</script>
</body>
</html>
